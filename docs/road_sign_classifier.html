---
title: Road Sign Classifier
layout: page
---
<style>    
    .page-heading h1 {
        font-size: 24px !important;
    }

    .upload-box {
        border: 2px dashed #007bff;
        padding: 20px;
        text-align: center;
        border-radius: 8px;
        margin: 20px 0;
        background: #f8f9fa;
    }

    .upload-box:hover {
        background: #e9ecef;
    }

    .btn {
        padding: 10px 20px;
        margin: 10px;
        border: none;
        border-radius: 5px;
        font-size: 16px;
        cursor: pointer;
    }

    .btn-primary {
        background: #007bff;
        color: white;
    }

    .btn-success {
        background: #28a745;
        color: white;
    }

    .btn-secondary {
        background: #6c757d;
        color: white;
    }

    .btn:hover {
        opacity: 0.8;
    }

    .btn:disabled {
        opacity: 0.5;
    }

    #photo {
        display: none;
    }

    #imageResult {
        max-width: 100%;
        max-height: 400px;
        object-fit: contain;
        margin: 20px auto;
        border-radius: 8px;
    }

    #label {
        text-transform: capitalize;
        font-size: 24px;
        font-weight: bold;
        margin: 20px 0;
        padding: 15px;
        border-radius: 5px;
        text-align: center;
    }

    #clearBtn {
        display: none;
    }

    .success {
        background: #d4edda;
        color: #155724;
    }

    .error {
        background: #f8d7da;
        color: #721c24;
    }

    .landmarks {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 10px;
        margin: 20px 0;
    }

    .landmark {
        background: #f8f9fa;
        padding: 10px;
        border-radius: 5px;
        border-left: 3px solid #007bff;
    }
</style>

<div style="max-width: 800px; margin: 0 auto;">    
    <div class="upload-box">
        <h4>Upload Road Sign Image</h4>
        <p>Click here to select an image</p>
        <button class="btn btn-primary" id="uploadBtn">Choose Image</button>
        <button class="btn btn-secondary" id="clearBtn">Clear Image</button>
        <input id="photo" type="file" accept="image/*" style="display:none;">
    </div>

    <div style="text-align: center;">
        <button class="btn btn-success" id="predictBtn">Classify Road Sign</button>
    </div>

    <div id="results" style="text-align: center;">
        <div id="label"></div>
        <img id="imageResult" src="" style="display: none;">
    </div>

    <script type="module">
        import { Client } from "https://cdn.jsdelivr.net/npm/@gradio/client/+esm";

        const uploadBtn = document.getElementById("uploadBtn");
        const fileInput = document.getElementById("photo");
        const preview = document.getElementById("imageResult");
        const resultBox = document.getElementById("label");
        const predictBtn = document.getElementById("predictBtn");
        const clearBtn = document.getElementById("clearBtn");

        uploadBtn.addEventListener("click", () => {
            fileInput.click();
        });

        // Show a preview when file is selected
        fileInput.addEventListener("change", () => {
            if (preview.src.startsWith('blob:')) {
                URL.revokeObjectURL(preview.src);
            }
            if (fileInput.files.length > 0) {
                preview.src = URL.createObjectURL(fileInput.files[0]);
                preview.style.display = "block";
                resultBox.innerText = "";
                clearBtn.style.display = "inline-block";
            }
        });

        clearBtn.addEventListener("click", () => {
            if (preview.src.startsWith('blob:')) {
                URL.revokeObjectURL(preview.src);
            }
            fileInput.value = "";
            preview.src = "";
            preview.style.display = "none";
            resultBox.innerText = "";
            resultBox.className = "";
            clearBtn.style.display = "none";

        });

        // Predict button 
        predictBtn.addEventListener("click", async () => {
            if (!fileInput.files.length) {
                resultBox.innerText = "Please upload an image first.";
                return;
            }
            predictBtn.disabled = true;
            resultBox.innerText = "Please Wait....";
            const imageFile = fileInput.files[0];

            try {
                const client = await Client.connect("mohtasim22/road-sign-classifier");
                const result = await client.predict("/predict", { image: imageFile });

                // Show top prediction
                const topPrediction = result.data[0].label;
                resultBox.innerText = topPrediction;
            } catch (err) {
                console.error(err);
                resultBox.innerText = "Error: " + err.message;
            } finally {
                predictBtn.disabled = false;
            }
        });
    </script>